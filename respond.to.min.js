(function(){var a=this;var c=a.Respond={};c.debug=true;c.version="0.1.3";c._push=function(d,f){var e=d;d=this._purify(d);this._mediaStack||(this._mediaStack={});this._mediaStack[d]||(this._mediaStack[d]={mql:null,items:[]});if(!this._mediaStack[d].mql){this._mediaStack[d].mql=a.matchMedia(e);this._mediaStack[d].mql.addListener(b);this._mediaStack[d].mql.keyValue=d}f.hasMatched||(f.hasMatched=false);f.hasNotMatched||(f.hasNotMatched=false);this._mediaStack[d].items.push(f);return this};c._purify=function(d,e){e||(e="_");return d.toLowerCase().replace(/[\s\-:()]/g,e).replace(/__/g,e).replace(/(_)$/,"")};function b(d){c._respond(d)}c._respond=function(d,h){var g=d.keyValue;if(navigator.userAgent.match(/MSIE 9.0/)){g=this._purify(d.media)}if(navigator.userAgent.match(/MSIE 8.0/)){for(var f=0;f<this._mediaStack[g].items.length;f++){var e=this._mediaStack[g].items[f];if(typeof e["if"]==="function"){if(!h){e["if"]()}else{if(e.namespace==h){e["if"]()}}}}return}if(!this._mediaStack[g]){return}if(d.matches){for(var f=0;f<this._mediaStack[g].items.length;f++){var e=this._mediaStack[g].items[f];if(typeof e["if"]==="function"){if(!h){e["if"]()}else{if(e.namespace==h){e["if"]()}}}}}else{for(var f=0;f<this._mediaStack[g].items.length;f++){var e=this._mediaStack[g].items[f];if(typeof e["else"]==="function"){if(!h){e["else"]()}else{if(e.namespace==h){e["else"]()}}}}}};c._retrieve=function(g,f){if(typeof this._mediaStack==="undefined"){return}var d=[];if(!f){for(var f in this._mediaStack){if(!this._mediaStack[f]){continue}for(var e=0;e<this._mediaStack[f].items.length;e++){d.push(this._mediaStack[f].items[e])}}}else{f=this._purify(f);if(!this._mediaStack[f]){return}d=this._mediaStack[f].items}for(var e=0;e<d.length;e++){if(d[e].namespace===g){return d[e]}}};c.to=function(e){if(e.length){for(var d=0;d<e.length;d++){this.to(e[d])}}else{if(typeof this._retrieve(e.namespace,e.media)==="undefined"){this._push(e.media,e)}}return this};c.ready=function(){for(var d in this._mediaStack){this._respond(this._mediaStack[d].mql)}};c.getStack=function(d){return this._mediaStack[d]||this._mediaStack};c.remove=function(f,e){if(!this._mediaStack.length&&!this._mediaStack[f]){return}if(!e){this._mediaStack[f].mql.removeListener(b);delete this._mediaStack[f];return this}for(var d=0;d<this._mediaStack[f].items.length;d++){if(this._mediaStack[f].items[d].namespace===e){delete this._mediaStack[f].items[d];this._mediaStack[f].items.splice(d,1)}}return this};c.call=function(g,f,i){try{if(i&&f){(this._retrieve(g,i))[f](this)}else{if(f){(this._retrieve(g))[f](this)}else{var d=this._purify((this._retrieve(g)).media);this._respond(this._mediaStack[d].mql,g)}}}catch(h){console.error(h)}return this}}).call(this);
